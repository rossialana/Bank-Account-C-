using Course_POO;
using System;
using System.Globalization;
namespace Course
{
    class Program
    {
        static void Main(string[] args)
        {
            Class_BankAccount conta;

            Console.Write("Entre o numero da conta: ");
            int numero = int.Parse(Console.ReadLine());

            // --- Loop para validar o nome ---
            string nome;

            while (true)
            {
                Console.Write("Entre o titular da conta: ");
                nome = Console.ReadLine();

                try
                {
                    // Testa criando apenas a conta sem saldo (não cria efetivamente)
                    var teste = new Class_BankAccount(numero, nome);
                    break; // nome válido -> sai do loop
                }
                catch (ArgumentException)
                {
                    Console.WriteLine("Nome inválido, digite novamente.\n");
                }
            }
            // -------------------------------

            Console.Write("Havera deposito inicial? (s/n) ");
            char resp = char.Parse(Console.ReadLine());

            if (resp == 's' || resp == 'S')
            {
                Console.Write("Entre o valor do deposito inicial: $");
                double quantia = double.Parse(Console.ReadLine());
                conta = new Class_BankAccount(numero, nome, quantia);
            }
            else
            {
                conta = new Class_BankAccount(numero, nome);
            }

            Console.WriteLine(" ");
            Console.WriteLine("Dados da conta: ");
            Console.WriteLine(conta);

            Console.WriteLine(" ");
            Console.Write("Entre um valor para deposito: $");
            double valor = double.Parse(Console.ReadLine());
            conta.DepositarSaldo(valor);
            Console.Write("Dados da conta atualizados: ");
            Console.Write(conta);

            Console.WriteLine(" ");
            Console.Write("Entre um valor para saque: $");
            valor = double.Parse(Console.ReadLine());
            conta.SacarSaldo(valor);
            Console.Write("Dados da conta atualizados: ");
            Console.Write(conta);
        }
    }
}
